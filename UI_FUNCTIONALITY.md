# UI Functionality and Core Mappings

This document outlines the features available in the web user interface and maps them to the core functionalities of the application and relevant backend components. Its purpose is to provide clarity for both users and developers.

| UI Feature                 | Description                                      | Core Function(s) Utilized                     | Backend Module(s) / Crates | UI Implementation Notes (e.g., route, key JS functions) | Status      |
|----------------------------|--------------------------------------------------|-----------------------------------------------|---------------------------|---------------------------------------------------------|-------------|
| File Upload & Basic Info   | Allows uploading `.safetensors` & `tokenizer.json` via browse or drag-and-drop. Displays list of processed files, basic status. For SafeTensors: lists tensor names & shapes. For `tokenizer.json`: shows JSON preview. Handles errors. | HTTP Multipart stream parsing. SafeTensors: Deserialization of metadata from byte stream, iteration through tensors for names & shapes. Tokenizer JSON: JSON deserialization from byte stream. | `actix-web`, `actix-multipart` (for file reception & streaming). `safetensors` crate (for `.safetensors` parsing). `serde_json` crate (for `tokenizer.json` parsing). `src/ui/routes.rs` (`upload_files` handler). | Route: POST `/upload`. JS: `handleFormSubmit()`, drag-and-drop event listeners. Dynamic DOM updates in `#uploadResults`. Progress indicators (spinner, button disabling). | Implemented |
| Detailed Tensor View       | Clickable tensor names in SafeTensors list open a modal. Modal shows Tensor Name, Full Shape, Data Type, and a short data preview. | SafeTensors: Accessing individual tensor metadata (shape, dtype). SafeTensors: Accessing tensor data slice (`.data()`). Byte-level data interpretation for preview (e.g., using `bytemuck`). | `safetensors` crate. `bytemuck` crate. `html-escape` crate (for data attributes). `src/ui/routes.rs` (data extraction logic in `upload_files` / `process_single_file`, embedding details in HTML data attributes). | JS: `attachTensorClickListeners()`, `showTensorDetails()`. HTML: `<li>` elements with `data-shape`, `data-dtype`, `data-preview` attributes. Modal: `#tensorModal`. | Implemented |
| Tensor Comparison View     | Select two tensors via checkboxes. A button opens a modal displaying their details (Name, File, Shape, DType, Preview) side-by-side. If compatible, shows numerical difference of previews. | (Primarily frontend logic using already extracted data from attributes). Backend provides unique identifiers for tensors. | `src/ui/routes.rs` (generation of checkboxes and `data-tensor-id` in HTML). | JS: `attachCheckboxListeners()`, `updateCompareButtonState()`, `compareTensorsButton` event listener, `getTensorDataFromCheckbox()`, `parsePreviewString()`. HTML: Checkboxes in tensor list, `#compareTensorsButton`, `#comparisonModal` with two-column layout (`#tensorAContent`, `#tensorBContent`) and `#analysisContent`. | Implemented |
| General UI & Server Config | UI styled with Pico.CSS. Web server port configurable via `--port` CLI argument. | HTTP Server setup. CLI argument parsing. | `actix-web` (for serving static files & API). `clap` (for CLI argument parsing). `src/ui/routes.rs` (`run_server`). `src/bin/native_cli.rs` (main entrypoint, arg parsing). | CSS: Pico.CSS linked in `index.html`, custom styles for modals and specific elements. Server started from `native_cli.rs`. | Implemented |
